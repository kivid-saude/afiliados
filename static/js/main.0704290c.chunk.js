(this["webpackJsonpkivid-affiliates"]=this["webpackJsonpkivid-affiliates"]||[]).push([[1],{55:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=55},56:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=56},57:function(e,t,n){var c={"./ion-icon.entry.js":[82,12]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=57,e.exports=r},76:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n.n(c),a=n(30),s=n.n(a),i=n(18),o=n(12),l=n(46),j=(n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(19)),u=n(2),d=n.n(u),b=n(4),h=n(14),x=n(49),O=n(37),p="kivid-affiliates:token",f=function(){return localStorage[p]},v=function(e){return localStorage[p]=e},m=function(){return localStorage.removeItem(p)},g=function(){return!!f()},w=["headers"],k={headers:{"Content-Type":"application/json",Accept:"application/json","App-Type":2}},y=function(e){401===e.status&&(m(),window.location.reload())},N=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,r,a,s,i,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},c=n.headers,r=Object(O.a)(n,w),(a=f())&&(k.headers.Authorization="Bearer ".concat(a)),e.next=5,fetch(t,Object(j.a)({headers:Object(j.a)(Object(j.a)({},k.headers),c)},r));case 5:return s=e.sent,y(s),e.next=9,s.json();case 9:if(i=e.sent,s.ok||401===s.status){e.next=12;break}throw new Error(i.message);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return N(e)},C=function(e,t){return N(e,{method:"POST",body:JSON.stringify(t)})},z=function(e){return{get:function(t){return S("".concat(e,"/").concat(t))},getAll:function(){return S("".concat(e))},create:function(t){return C("".concat(e),t)},post:function(t){return C("".concat(e),t)},save:function(t,n){return function(e,t){return N(e,{method:"PUT",body:JSON.stringify(t)})}("".concat(e,"/").concat(t),n)},update:function(t,n){return function(e,t){return N(e,{method:"PATCH",body:JSON.stringify(t)})}("".concat(e,"/").concat(t),n)},remove:function(t){return n="".concat(e,"/").concat(t),N(n,{method:"DELETE"});var n}}},E={users:function(){return"https://back.kivid.com.br/api/users"},user:function(){return"https://back.kivid.com.br/api/user"},auth:function(){return"https://back.kivid.com.br/api/auth"},signIn:function(){return"".concat(E.auth(),"/login")},signUp:function(){return"".concat(E.auth(),"/sign-up")},signOut:function(){return"".concat(E.auth(),"/logout")},sales:function(){return"https://back.kivid.com.br/api/affiliate-invitations"}},L=(z(E.users),function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(E.signIn(),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(E.signUp(),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(E.signOut(),{}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=f(),t=Object(x.a)(e?E.user():null,N,{}),n=t.data,c=t.error,r=t.mutate,a=t.isValidating,s=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return n=e.sent,v(n.access_token),r(),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error",e.t0);case 8:m(),v(null);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),l=function(){return S(E.sales())};return{data:n,mutate:r,user:null===n||void 0===n?void 0:n.data,isValidating:a,isLoading:!c&&!(null===n||void 0===n?void 0:n.data),token:e,signUp:i,signIn:s,logout:o,getSalesList:l}},T=n(11),_=function(){var e=P().signUp,t=Object(c.useState)({name:"",email:"",password:""}),n=Object(h.a)(t,2),r=n[0],a=n[1],s=function(){var t=Object(b.a)(d.a.mark((function t(n,c){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),console.log(c),t.next=4,e(c);case 4:r=t.sent,console.log({userCreated:r});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(T.jsxs)(o.o,{children:[Object(T.jsx)(o.j,{children:Object(T.jsxs)(o.x,{children:[Object(T.jsx)(o.w,{children:"Cadastro"}),Object(T.jsx)(o.d,{slot:"start",children:Object(T.jsx)(o.b,{text:"Login"})})]})}),Object(T.jsxs)(o.h,{fullscreen:!0,children:[Object(T.jsx)(o.j,{collapse:"condense",children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{size:"large",children:"Cadastro"})})}),Object(T.jsxs)("form",{className:"ion-margin-top ion-margin-bottom",onSubmit:function(e){return s(e,r)},children:[Object(T.jsxs)(o.m,{children:[Object(T.jsx)(o.n,{position:"floating",children:"Nome"}),Object(T.jsx)(o.l,{type:"text",value:null===r||void 0===r?void 0:r.name,onIonChange:function(e){return a(Object(j.a)(Object(j.a)({},r),{},{name:e.detail.value}))},autocapitalize:"words",autocomplete:"name",required:!0})]}),Object(T.jsxs)(o.m,{children:[Object(T.jsx)(o.n,{position:"floating",children:"E-mail"}),Object(T.jsx)(o.l,{type:"email",value:null===r||void 0===r?void 0:r.email,onIonChange:function(e){return a(Object(j.a)(Object(j.a)({},r),{},{email:e.detail.value}))},autocomplete:"email",required:!0})]}),Object(T.jsxs)(o.m,{children:[Object(T.jsx)(o.n,{position:"floating",children:"Senha"}),Object(T.jsx)(o.l,{type:"text",value:null===r||void 0===r?void 0:r.password,onIonChange:function(e){return a(Object(j.a)(Object(j.a)({},r),{},{password:e.detail.value}))},autocomplete:"new-password",required:!0})]}),Object(T.jsxs)("div",{className:"ion-margin-top ion-padding",children:[Object(T.jsx)(o.c,{type:"submit",expand:"block",shape:"round",size:"large",children:"Cadastrar"}),Object(T.jsx)(o.r,{className:"ion-justify-content-center ion-margin-top",children:Object(T.jsx)(o.c,{type:"button",fill:"clear",shape:"round",size:"small",routerLink:"/login",routerDirection:"back",children:"J\xe1 tenho conta"})})]})]})]})]})},U=n(29),F=function(){var e=P().user;return console.log({user:e}),Object(T.jsxs)(o.o,{children:[Object(T.jsx)(o.j,{children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{children:null===e||void 0===e?void 0:e.nickname})})}),Object(T.jsxs)(o.h,{fullscreen:!0,children:[Object(T.jsx)(o.j,{collapse:"condense",children:Object(T.jsx)(o.x,{children:Object(T.jsxs)(o.w,{size:"large",children:["Ol\xe1, ",null===e||void 0===e?void 0:e.nickname,"."]})})}),Object(T.jsx)(o.e,{children:Object(T.jsx)(o.f,{className:"py-6 px-7",children:Object(T.jsxs)("div",{className:"flex items-center",children:[Object(T.jsx)(o.k,{icon:U.c,color:"medium",className:"text-5xl mr-6 opacity-70",style:{"--ionicon-stroke-width":16}}),Object(T.jsxs)("div",{children:[Object(T.jsx)("p",{children:"Seu c\xf3digo de vendedor"}),Object(T.jsx)(o.v,{color:"success",className:"block text-2xl mt-1 font-bold",style:{letterSpacing:"0.05em"},children:null===e||void 0===e?void 0:e.id})]})]})})})]})]})},V=function(){var e=P().getSalesList,t=Object(c.useState)(null),n=Object(h.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){Object(b.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:n=t.sent,c=n.data,console.log({sales:c}),a(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}),[]);var s=function(e){return new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(e)};return Object(T.jsxs)(o.o,{children:[Object(T.jsx)(o.j,{children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{children:"Vendas"})})}),Object(T.jsxs)(o.h,{fullscreen:!0,children:[Object(T.jsx)(o.j,{collapse:"condense",children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{size:"large",children:"Vendas"})})}),Object(T.jsxs)("section",{className:"ion-padding-start ion-padding-end",children:[Object(T.jsxs)("div",{children:["Quantidade de vendas: ",Object(T.jsx)("b",{children:(null===r||void 0===r?void 0:r.length)||0})]}),Object(T.jsxs)("div",{className:"mt-1",children:["Total recebido:"," ",Object(T.jsx)(o.v,{color:"success",children:Object(T.jsx)("b",{children:(null===r||void 0===r?void 0:r.length)&&function(){var e=null===r||void 0===r?void 0:r.reduce((function(e,t){return e+.1*t.plan_type.price}),0);return s(e)}()||0})})]})]}),Object(T.jsx)("section",{className:"my-8",children:(null===r||void 0===r?void 0:r.map((function(e){return Object(T.jsx)(o.e,{children:Object(T.jsx)(o.f,{className:"p-4",children:Object(T.jsxs)(o.i,{children:[Object(T.jsxs)(o.r,{children:[Object(T.jsxs)(o.g,{size:"6",children:[Object(T.jsx)("p",{children:"Cliente"}),Object(T.jsx)(o.v,{color:"dark",children:Object(T.jsx)("p",{children:e.buyer.name})})]}),Object(T.jsxs)(o.g,{size:"6",children:[Object(T.jsx)("p",{children:"Plano comprado"}),Object(T.jsx)(o.v,{color:"dark",children:Object(T.jsx)("p",{children:e.plan_type.name})})]})]}),Object(T.jsxs)(o.r,{children:[Object(T.jsxs)(o.g,{size:"6",children:[Object(T.jsx)("p",{children:"Valor do plano"}),Object(T.jsx)(o.v,{color:"dark",children:Object(T.jsx)("p",{children:s(e.plan_type.price)})})]}),Object(T.jsxs)(o.g,{size:"6",children:[Object(T.jsx)("p",{children:"Data da compra"}),Object(T.jsx)(o.v,{color:"dark",children:Object(T.jsx)("p",{children:new Date(e.created_at).toLocaleDateString()})})]})]}),Object(T.jsx)(o.r,{children:Object(T.jsxs)(o.g,{size:"6",children:[Object(T.jsx)("p",{children:"Valor do recebido"}),Object(T.jsx)(o.v,{color:"success",children:Object(T.jsxs)("p",{children:[10,"% (",(t=e.plan_type.price,s(.1*t)),")"]})})]})})]})})},e.id);var t})))||Object(T.jsx)("div",{className:"ion-padding",children:"Voc\xea n\xe3o tem vendas realizadas."})})]})]})},q=function(){var e=Object(i.e)(),t=P().logout,n=function(){var n=Object(b.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:e.replace("/login");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(T.jsxs)(o.o,{children:[Object(T.jsx)(o.j,{children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{children:"Perfil"})})}),Object(T.jsxs)(o.h,{fullscreen:!0,children:[Object(T.jsx)(o.j,{collapse:"condense",children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{size:"large",children:"Perfil"})})}),Object(T.jsx)("section",{children:Object(T.jsx)(o.c,{color:"danger",expand:"block",fill:"outline",className:"m-4",onClick:n,children:"Sair"})})]})]})},A=function(){var e=Object(i.f)();return Object(T.jsxs)(o.u,{children:[Object(T.jsxs)(o.q,{children:[Object(T.jsx)(i.b,{exact:!0,path:"".concat(e.path,"/tab1"),children:Object(T.jsx)(F,{})}),Object(T.jsx)(i.b,{exact:!0,path:"".concat(e.path,"/tab2"),children:Object(T.jsx)(V,{})}),Object(T.jsx)(i.b,{exact:!0,path:"".concat(e.path,"/tab3"),children:Object(T.jsx)(q,{})}),Object(T.jsx)(i.b,{exact:!0,path:e.path,children:Object(T.jsx)(i.a,{to:"".concat(e.path,"/tab1")})})]}),Object(T.jsxs)(o.s,{slot:"bottom",children:[Object(T.jsxs)(o.t,{tab:"tab1",href:"".concat(e.path,"/tab1"),style:{"--color-selected":"var(--ion-color-dark)"},children:[Object(T.jsx)(o.k,{icon:U.b}),Object(T.jsx)(o.n,{children:"In\xedcio"})]}),Object(T.jsxs)(o.t,{tab:"tab2",href:"".concat(e.path,"/tab2"),style:{"--color-selected":"var(--ion-color-dark)"},children:[Object(T.jsx)(o.k,{icon:U.a}),Object(T.jsx)(o.n,{children:"Vendas"})]}),Object(T.jsxs)(o.t,{tab:"tab3",href:"".concat(e.path,"/tab3"),style:{"--color-selected":"var(--ion-color-dark)"},children:[Object(T.jsx)(o.k,{icon:U.d}),Object(T.jsx)(o.n,{children:"Perfil"})]})]})]})},J=function(){var e=P(),t=e.signIn,n=(e.token,Object(i.e)()),r=Object(c.useState)({email:"",password:""}),a=Object(h.a)(r,2),s=a[0],l=a[1],u=function(){var e=Object(b.a)(d.a.mark((function e(c,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),console.log(r),e.prev=2,e.next=5,t(r);case 5:a=e.sent,console.log({response:a}),n.replace("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(T.jsxs)(o.o,{children:[Object(T.jsx)(o.j,{children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{children:"Kivid Afiliados"})})}),Object(T.jsxs)(o.h,{fullscreen:!0,children:[Object(T.jsx)(o.j,{collapse:"condense",children:Object(T.jsx)(o.x,{children:Object(T.jsx)(o.w,{size:"large",children:"Kivid Afiliados"})})}),Object(T.jsx)(o.e,{children:Object(T.jsxs)("form",{className:"py-6",onSubmit:function(e){return u(e,s)},children:[Object(T.jsx)(o.v,{color:"success",children:Object(T.jsx)("h2",{className:"mt-0 mb-2 ml-5",children:"Login"})}),Object(T.jsxs)(o.m,{children:[Object(T.jsx)(o.n,{position:"floating",children:"E-mail"}),Object(T.jsx)(o.l,{type:"email",name:"email",value:null===s||void 0===s?void 0:s.email,onIonChange:function(e){return l(Object(j.a)(Object(j.a)({},s),{},{email:e.detail.value}))},autocomplete:"email",required:!0})]}),Object(T.jsxs)(o.m,{children:[Object(T.jsx)(o.n,{position:"floating",children:"Senha"}),Object(T.jsx)(o.l,{type:"password",value:null===s||void 0===s?void 0:s.password,onIonChange:function(e){return l(Object(j.a)(Object(j.a)({},s),{},{password:e.detail.value}))},autocomplete:"current-password",name:"password",required:!0})]}),Object(T.jsxs)("div",{className:"mt-8 px-4",children:[Object(T.jsx)(o.c,{type:"submit",color:"success",expand:"block",shape:"round",size:"large",children:"Entrar"}),Object(T.jsx)(o.r,{className:"ion-justify-content-center ion-margin-top",children:Object(T.jsx)(o.c,{type:"button",color:"success",fill:"clear",shape:"round",size:"small",routerLink:"/cadastro",children:"N\xe3o tenho conta"})})]})]})})]})]})},B=["children"],M=function(e){var t=e.children,n=Object(O.a)(e,B);return console.log({isLoggedIn:g()}),Object(T.jsx)(i.b,Object(j.a)(Object(j.a)({},n),{},{children:g()?t:Object(T.jsx)(i.a,{to:"/login"})}))};Object(o.G)();var K=function(){return Object(T.jsx)(o.a,{children:Object(T.jsx)(l.a,{children:Object(T.jsxs)(o.q,{children:[Object(T.jsx)(i.b,{exact:!0,path:"/cadastro",children:Object(T.jsx)(_,{})}),Object(T.jsx)(i.b,{exact:!0,path:"/login",children:Object(T.jsx)(J,{})}),Object(T.jsx)(M,{path:"/home",children:Object(T.jsx)(A,{})}),Object(T.jsx)(i.b,{exact:!0,path:"/",children:Object(T.jsx)(i.a,{to:"/home"})})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=function(e){e&&e instanceof Function&&n.e(14).then(n.bind(null,92)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(K,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),W()}},[[78,2,3]]]);
//# sourceMappingURL=main.0704290c.chunk.js.map